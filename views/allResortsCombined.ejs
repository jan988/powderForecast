<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Ski Resorts Forecast</title>
    <link rel="stylesheet" href="/styles/indexStyle.css">
</head>
<body>
    <%- include('partials/navbar') %>

    <div class="container">
        <section class="forecast-section">
            <div class="section-header">
                <h3>Week Ahead Snow Forecast</h3>
                <p>European ski resorts ranked by expected snowfall over the next seven days</p>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Resort</th>
                            <th>Elevation Range</th>
                            <th>Top</th>
                            <th>Mid-mountain</th>
                            <th>Valley</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% combinedResorts.forEach(function(resort, index) { %>
                            <tr>
                                <!-- Rank -->
                                <td><%= index + 1 %></td>

                                <!-- Resort Name with Flag -->
                                <td>
                                    <!-- Display country flag using a CDN based on the country -->
                                    <% if (resort.country === 'Switzerland') { %>
                                        <img src="https://flagcdn.com/w20/ch.png" alt="Switzerland" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } else if (resort.country === 'Austria') { %>
                                        <img src="https://flagcdn.com/w20/at.png" alt="Austria" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } else if (resort.country === 'France') { %>
                                        <img src="https://flagcdn.com/w20/fr.png" alt="France" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } else if (resort.country === 'Italy') { %>
                                        <img src="https://flagcdn.com/w20/it.png" alt="Italy" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } else if (resort.country === 'Slovakia') { %>
                                        <img src="https://flagcdn.com/w20/sk.png" alt="Slovakia" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } else if (resort.country === 'Slovenia') { %>
                                        <img src="https://flagcdn.com/w20/si.png" alt="Slovenia" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } else if (resort.country === 'Germany') { %>
                                        <img src="https://flagcdn.com/w20/de.png" alt="Germany" style="width:20px; height:20px; vertical-align: middle; margin-right: 8px;">
                                    <% } %> 
                                    
                                    <% if (resort.url && resort.url !== '#') { %>
                                        <a href="<%= resort.url %>" target="_blank" class="resort-link" rel="noopener noreferrer">
                                            <%= resort.resort %>
                                        </a>
                                    <% } else { %>
                                        <%= resort.resort %>
                                    <% } %>
                                </td>

                                <!-- Elevation Range -->
                                <td><%= resort.bottomLiftElevation %> - <%= resort.topLiftElevation %> m</td>

                                <!-- Snowfall amounts -->
                                <td class="highlight"><%= resort.topLiftSnowfall %> cm</td>
                                <td><%= resort.midLiftSnowfall %> cm</td>
                                <td><%= resort.bottomLiftSnowfall %> cm</td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
</body>
</html>